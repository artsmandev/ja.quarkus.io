msgid ""
msgstr ""
"Language: ja_JP\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"X-Generator: jekyll-l10n\n"

#. type: YAML Front Matter: title
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy, no-wrap
msgid "Addressing CVE-2023-44487: An Overview and Quarkus Solution"
msgstr "CVE-2023-44487への対応：概要とQuarkusソリューション"

#. type: YAML Front Matter: synopsis
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy, no-wrap
msgid "Learn about the  CVE-2023-44487, a security vulnerability affecting HTTP/2 servers, and the solution implemented in Quarkus"
msgstr "HTTP/2サーバーに影響を及ぼすセキュリティ脆弱性CVE-2023-44487と、Quarkusに実装された解決策について学んでください。"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "You may have encountered the infamous https://nvd.nist.gov/vuln/detail/CVE-2023-44487[CVE-2023-44487], a security vulnerability directly affecting HTTP/2 servers. This CVE exploits a specific weakness within the HTTP/2 protocol, causing a ripple effect across all HTTP/2 servers."
msgstr "HTTP/2サーバーに直接影響するセキュリティ脆弱性、悪名高い link:https://nvd.nist.gov/vuln/detail/CVE-2023-44487[CVE-2023-44487に] 遭遇したことがあるかもしれません。このCVEはHTTP/2プロトコル内の特定の弱点を悪用し、すべてのHTTP/2サーバーに波及効果を引き起こします。"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "However, the impact of this CVE is not uniform across all servers; it varies depending on the server's underlying technology and execution model."
msgstr "しかし、このCVEの影響はすべてのサーバーで一様ではなく、サーバーの基盤技術や実行モデルによって異なる。"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "The consequences can range from severe, such as potential Distributed Denial of Service (DDoS) attacks or even server crashes, to relatively minor, manifesting as only a slight increase in CPU usage. This variance in impact is the reason behind the differing CVE scores, ranging from _7.3_ for the former scenario to https://github.com/netty/netty/security/advisories/GHSA-xpw8-rcwv-8f8p[_5.3_] for the latter."
msgstr "その影響は、潜在的な分散サービス拒否（DDoS）攻撃やサーバークラッシュのような深刻なものから、CPU使用率のわずかな増加という比較的軽微なものまで様々です。この影響のばらつきが、前者のシナリオの _7.3から_ 後者のシナリオの link:https://github.com/netty/netty/security/advisories/GHSA-xpw8-rcwv-8f8p[5.] 3までという、異なるCVEスコアの背景にある。"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "Quarkus falls into the _5.3_ category, where the impact is less pronounced in practice."
msgstr "クアルカスは _5.3の_ カテゴリーに属し、実際のところ影響はそれほど顕著ではない。"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "Nevertheless, we take all security-related issues seriously and, following our https://quarkus.io/security/#supported-versions[security policy], we have released the following version updates for Quarkus platform:"
msgstr "とはいえ、私たちはセキュリティに関連するすべての問題を真剣に受け止めており、私たちの link:https://quarkus.io/security/#supported-versions[セキュリティポリシーに従って] 、Quarkusプラットフォームの以下のバージョンアップをリリースしました："

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "Latest 3.x: https://quarkus.io/blog/quarkus-3-4-3-released/[Quarkus 3.4.3] (latest 3.x)"
msgstr "最新の3.x link:https://quarkus.io/blog/quarkus-3-4-3-released/[Quarkus 3.4.3] (最新の3.x)"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "3.2 LTS: https://quarkus.io/blog/quarkus-3-4-3-released/[Quarkus 3.2.7] (3.2 LTS)"
msgstr "3.2 LTS: link:https://quarkus.io/blog/quarkus-3-4-3-released/[Quarkus 3.2.7] (3.2 LTS)"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "Latest 2.x: https://quarkus.io/blog/quarkus-2-16-12-final-released/[Quarkus 2.16.12.Final]"
msgstr "最新の2.x link:https://quarkus.io/blog/quarkus-2-16-12-final-released/[Quarkus 2.16.12.Final]"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "Similarly, Red Hat Build of Quarkus includes the CVE fixes in its current release cycle:"
msgstr "同様に、QuarkusのRed Hat Buildには、現在のリリースサイクルでCVE修正が含まれている："

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "https://access.redhat.com/documentation/en-us/red_hat_build_of_quarkus/quarkus-3.2/guide/4ea39096-72be-4ccf-a22e-7e42063d29ec#_163a1086-6b80-4441-81b4-cc358d2efaaa[Red Hat Build of Quarkus 3.2.6]"
msgstr "link:https://access.redhat.com/documentation/en-us/red_hat_build_of_quarkus/quarkus-3.2/guide/4ea39096-72be-4ccf-a22e-7e42063d29ec#_163a1086-6b80-4441-81b4-cc358d2efaaa[Quarkus 3.2.6のRed Hatビルド]"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "https://access.redhat.com/documentation/en-us/red_hat_build_of_quarkus/rhbq-documentation-2-13/guide/0f24d6b4-7032-4601-99cb-fbdefec89f6d#_192608e2-e41d-43bd-908d-c2e5e23c642c[Red Hat Build of Quarkus 2.13.8]"
msgstr "link:https://access.redhat.com/documentation/en-us/red_hat_build_of_quarkus/rhbq-documentation-2-13/guide/0f24d6b4-7032-4601-99cb-fbdefec89f6d#_192608e2-e41d-43bd-908d-c2e5e23c642c[Quarkus 2.13.8のRed Hatビルド]"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "Let's delve deeper into the problem to understand better the distinctions and our approach to resolving it."
msgstr "この問題をより深く掘り下げ、その区別と解決へのアプローチをよりよく理解しよう。"

#. type: Title ==
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy, no-wrap
msgid "Understanding the HTTP/2 CVE"
msgstr "HTTP/2 CVEを理解する"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "When you browse a website that supports HTTP/2, such as https://quarkus.io, it enables the use of a single connection to fetch numerous resources, including the index page, images, JavaScript scripts, fonts, CSS files, and more. This eliminates the need for the browser to repeatedly establish new connections for each resource, resulting in a more efficient and faster browsing experience. Furthermore, HTTP/2 doesn't require the browser to wait for a response before sending another request."
msgstr "https://quarkus.io 、HTTP/2をサポートするウェブサイトを閲覧すると、インデックスページ、画像、JavaScriptスクリプト、フォント、CSSファイルなど、多数のリソースを取得するために単一の接続を使用できるようになります。これにより、ブラウザが各リソースに対して繰り返し新しい接続を確立する必要がなくなり、より効率的で高速なブラウジングが可能になります。さらにHTTP/2では、ブラウザが次のリクエストを送信する前にレスポンスを待つ必要がありません。"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "This streaming capability of HTTP/2 enhances application concurrency and minimizes network costs, as it reduces the need for numerous connections. Nevertheless, this feature can pose challenges, as a single connection can generate a multitude of requests. To address this, HTTP/2 offers a means of restraining the number of active concurrent streams to prevent clients from overburdening the server. This control is a server-side setting. When a client connects, the server communicates its maximum allowable concurrency. In Quarkus, the ceiling for concurrent streams is set at 100 by default. This limit can be customized using the `quarkus.http.limits.max-concurrent-streams` property."
msgstr "HTTP/2のこのストリーミング機能は、アプリケーションの同時実行性を高め、多数の接続の必要性を減らすため、ネットワークコストを最小化する。とはいえ、単一の接続が多数のリクエストを生成する可能性があるため、この機能は課題をもたらす可能性があります。これに対処するため、HTTP/2はクライアントがサーバーに負担をかけすぎないように、アクティブな同時ストリーム数を制限する手段を提供します。この制御はサーバー側の設定です。クライアントが接続すると、サーバーは最大許容同時ストリーム数を通知します。Quarkusでは、同時ストリームの上限はデフォルトで100に設定されています。この上限は、 `quarkus.http.limits.max-concurrent-streams` プロパティを使用してカスタマイズできます。"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "When a client exceeds the permitted stream limit, the server responds with an `RST_STREAM` frame, closing the specific stream without severing the connection, safeguarding against stream flooding."
msgstr "クライアントが許可されたストリームの上限を超えると、サーバーは `RST_STREAM` フレームで応答し、接続を切断することなく特定のストリームを閉じ、ストリームのフラッディングから保護します。"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "But there's more to the story. In HTTP/2, both the client and server maintain stream status, eventually syncing. Unlike HTTP 1.1, HTTP/2 permits clients to gracefully cancel in-flight requests using the `RST_STREAM` frame. On the client side, the stream closes upon frame transmission, while the server-side closure happens upon processing. This cancellation doesn't impact other streams in the same connection."
msgstr "しかし、話には続きがある。HTTP/2では、クライアントとサーバーの両方がストリームの状態を維持し、最終的には同期する。HTTP 1.1とは異なり、HTTP/2はクライアントが `RST_STREAM` フレームを使って飛行中のリクエストを優雅にキャンセルすることを許可します。クライアント側ではフレーム送信時にストリームが閉じ、サーバー側では処理時に閉じます。このキャンセルは、同じ接続内の他のストリームには影響しません。"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "The CVE-2023-44487 attack capitalizes on rapid stream cancellations. While the client closes streams, the server-side closure lags, effectively bypassing the client's stream limit. This allows the client to open an excessive number of streams, up to 1,073,741,824. During the attack, the client initiates a request via a `HEADERS` frame in a new stream and immediately dispatches the `RST_STREAM` frame. From the client's viewpoint, the stream closes. However, the server must allocate resources to process the `RST_STREAM` frame, ultimately closing the associated stream."
msgstr "CVE-2023-44487の攻撃は、ストリームの急速なキャンセルに乗じて行われる。クライアントがストリームをクローズしている間、サーバー側のクローズは遅れ、クライアントのストリーム制限を効果的にバイパスする。これにより、クライアントは最大1,073,741,824個ものストリームを開くことができる。この攻撃では、クライアントは新しいストリームの `HEADERS` フレーム経由でリクエストを開始し、直ちに `RST_STREAM` フレームをディスパッチする。クライアントから見ると、ストリームは閉じる。しかし、サーバーは `RST_STREAM` フレームを処理するためにリソースを割り当てなければならず、最終的に関連するストリームを閉じます。"

#. type: Title ==
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy, no-wrap
msgid "Threads vs event-loops"
msgstr "スレッド vs イベントループ"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "As the client repeatedly opens and cancels streams in quick succession, the server grapples with handling `RST_STREAM` frames and associated bookkeeping. The severity of the attack differs between server technologies. In a one-thread-per-request model, it can be catastrophic, as it consumes all available worker threads, leading to queued `HEADERS` and `RST_STREAM` frames and negatively impacting concurrent legitimate requests, thus significantly affecting service availability (CVE score: 7.3/10)."
msgstr "クライアントがストリームのオープンとキャンセルを繰り返すと、サーバーは `RST_STREAM` フレームの処理と関連する帳簿の管理に追われる。攻撃の深刻度はサーバー技術によって異なる。1リクエストあたり1スレッドモデルでは、利用可能なワーカースレッドをすべて消費し、 `HEADERS` および `RST_STREAM` フレームがキューに入れられ、同時実行中の正当なリクエストに悪影響を与えるため、サービスの可用性に大きな影響を与え、大惨事になる可能性があります（CVE スコア：7.3/10）。"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "In the case of Netty-based servers (like Quarkus) and other event loop-based servers, the issue is less severe. The incoming frames are placed in the event loop queue, causing higher CPU usage but no thread starvation. Also, Netty handles `RST_STREAM` frames very efficiently. This may result in higher response times, with the server appearing busy but still managing concurrent legitimate requests. While a problem, its impact on availability is relatively lower (CVE score: 5.3/10)."
msgstr "Nettyベースのサーバー（Quarkusのような）や他のイベントループベースのサーバーの場合、問題はそれほど深刻ではない。受信フレームはイベントループのキューに置かれるため、CPU使用率は高くなりますが、スレッドが飢餓状態に陥ることはありません。また、Nettyは `RST_STREAM` フレームを非常に効率的に処理します。その結果、サーバーがビジー状態であるように見えても、同時に発生する正当なリクエストを処理するため、応答時間が長くなることがあります。問題ではありますが、可用性への影響は比較的低いです（CVE スコア: 5.3/10）。"

#. type: Title ==
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy, no-wrap
msgid "The Quarkus solution"
msgstr "クアルカスのソリューション"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "Due to the high-profile nature of the CVE, Quarkus has taken measures to address this concern. We've implemented a solution based on the Netty fix. The system monitors `RST_STREAM` frames sent per connection, imposing a 200-frame limit within a 30-second window. If the threshold is exceeded, Quarkus takes action by closing the connection and issuing a `GOAWAY` frame. This procedure closes the connection and all currently active streams associated with it."
msgstr "このCVEは注目度が高いため、Quarkusはこの懸念に対処するための対策を講じました。Nettyの修正に基づくソリューションを実装しました。システムは、接続ごとに送信される `RST_STREAM` フレームを監視し、30 秒のウィンドウ内に 200 フレームの制限を設けます。このしきい値を超えた場合、Quarkusは接続を閉じて `GOAWAY` 。この手順により、接続と、それに関連する現在アクティブなストリームがすべて閉じられます。"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "While these default settings effectively counter the attack, we understand the need for flexibility. In the upcoming Quarkus 3 release, users will have the option to fine-tune these thresholds, allowing you to customize the configuration to meet your specific requirements, including reducing the maximum number of concurrent streams (already possible today), adjusting the number of `RST_STREAM` frames, and modifying the time window for attack detection."
msgstr "これらのデフォルト設定は効果的に攻撃に対抗するものですが、柔軟性の必要性も理解しています。近日リリース予定のQuarkus 3では、これらのしきい値を微調整するオプションが用意され、同時ストリームの最大数の削減（現在すでに可能）、 `RST_STREAM` フレーム数の調整、攻撃検出のタイムウィンドウの変更など、特定の要件に合わせて設定をカスタマイズできるようになります。"

#. type: Title ==
#: _posts/2023-10-20-cve-2023-44487.adoc
#, no-wrap
msgid "Summary"
msgstr "まとめ"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "The HTTP/2 CVE is serious and can be used for Distributed Denial of Service attacks, especially if the implementation is thread based. Quarkus is using Netty which is based on an event loop model and thus Quarkus is not as badly affected."
msgstr "HTTP/2のCVEは深刻で、特にスレッドベースの実装の場合、分散サービス拒否攻撃に使われる可能性がある。Quarkusはイベントループモデルに基づくNettyを使用しているため、Quarkusはそれほど深刻な影響を受けない。"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "We take all security-related issues seriously and following our security policy, we have released the following version updates for Quarkus platform:"
msgstr "Quarkusでは、セキュリティに関連するすべての問題を真摯に受け止めており、セキュリティポリシーに従い、Quarkusプラットフォームの以下のバージョンアップをリリースしました："

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "All these versions contain the fix described in this article."
msgstr "これらのバージョンにはすべて、この記事で説明した修正が含まれている。"

#. type: Plain text
#: _posts/2023-10-20-cve-2023-44487.adoc
#, fuzzy
msgid "We strongly recommend updating your application to one of these versions."
msgstr "これらのバージョンにアップデートすることを強くお勧めします。"
